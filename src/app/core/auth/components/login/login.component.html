<main class="login-main">
  <div class="bg-decoration bg-decoration-1"></div>
  <div class="bg-decoration bg-decoration-2"></div>
  <div class="bg-decoration bg-decoration-3"></div>

  <div class="login-container">
    <!-- Left Side: Branding & Benefits -->
    <div class="login-left">
      <div class="brand-section">
        <div class="brand-logo">
          <app-logo variant="full" size="lg" theme="light"></app-logo>
        </div>
        <h2 class="brand-tagline">Unlock Your Text. Edit Anything.</h2>
        <p class="brand-description">
          Sign in to continue your document transformation journey
        </p>
      </div>

      <div class="benefits-list">
        <div class="benefit-item">
          <div class="benefit-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
            </svg>
          </div>
          <div class="benefit-content">
            <h3 class="benefit-title">Instant Access</h3>
            <p class="benefit-desc">Pick up right where you left off</p>
          </div>
        </div>

        <div class="benefit-item">
          <div class="benefit-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
            </svg>
          </div>
          <div class="benefit-content">
            <h3 class="benefit-title">Secure Sign In</h3>
            <p class="benefit-desc">Protected by industry-standard encryption</p>
          </div>
        </div>

        <div class="benefit-item">
          <div class="benefit-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"/>
            </svg>
          </div>
          <div class="benefit-content">
            <h3 class="benefit-title">Cloud Sync</h3>
            <p class="benefit-desc">Access your documents from anywhere</p>
          </div>
        </div>
      </div>

      <div class="trust-indicators">
        <div class="trust-item">
          <span class="trust-number">10K+</span>
          <span class="trust-label">Active Users</span>
        </div>
        <div class="trust-item">
          <span class="trust-number">99.9%</span>
          <span class="trust-label">Uptime</span>
        </div>
        <div class="trust-item">
          <span class="trust-number">24/7</span>
          <span class="trust-label">Support</span>
        </div>
      </div>
    </div>

    <!-- Right Side: Login Form -->
    <div class="login-right">
      <div class="login-card">
        <div class="login-header">
          <h1 class="login-title">Welcome Back</h1>
          <p class="login-subtitle">
            Don't have an account?
            <a routerLink="/auth/signup" class="signup-link">Create account</a>
          </p>
        </div>

        <!-- Google Sign In Section -->
        <div class="google-auth-section">
          <app-google-signup
            [clientId]="environment.google.clientId"
            [fullWidth]="true"
            [usePopup]="environment.features.googlePopupAuth"
            [signupConfig]="googleConfig"
            [additionalScopes]="[]"
            (signupStarted)="onGoogleLoginStarted()"
            (signupSuccess)="onGoogleLoginSuccess($event)"
            (signupError)="onGoogleLoginError($event)"
            (signupCancelled)="onGoogleLoginCancelled()">
          </app-google-signup>

          @if (googleError()) {
            <div class="error-message google-error" role="alert">
              <svg class="error-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
              </svg>
              <span>{{ googleError()?.message }}</span>
            </div>
          }
        </div>

        <div class="divider">
          <span class="divider-text">Or sign in with email</span>
        </div>

        <!-- Session Expired Message -->
        @if (sessionExpired()) {
          <div class="info-message session-expired" role="alert">
            <svg class="info-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
            </svg>
            <span>Your session has expired. Please sign in again to continue.</span>
          </div>
        }

        <!-- Error Messages -->
        @if (isRateLimited()) {
          <div class="error-message rate-limit-error" role="alert">
            <svg class="error-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
            </svg>
            <div class="error-content">
              <strong>Too Many Failed Attempts</strong>
              <p>Your account has been temporarily locked for security. Please wait before trying again.</p>
              @if (retryAfter() > 0) {
                <p class="retry-time">
                  Try again in <strong>{{ formatRetryTime() }}</strong>
                </p>
              }
            </div>
          </div>
        }

        @if (showAttemptsWarning() && !isRateLimited()) {
          <div class="warning-message" role="alert">
            <svg class="warning-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
            </svg>
            <span>
              <strong>{{ attemptsRemaining() }}</strong> attempt{{ attemptsRemaining() !== 1 ? 's' : '' }} remaining before your account is temporarily locked
            </span>
          </div>
        }

        @if (error() && !isRateLimited()) {
          <div class="error-message auth-error" role="alert">
            <svg class="error-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
            </svg>
            <span>{{ getErrorMessage() }}</span>
          </div>
        }

        <!-- Login Form -->
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form" novalidate>
          <app-form-input
            label="Email Address"
            type="email"
            placeholder="Enter your email address"
            [required]="true"
            [formControl]="emailControl"
            [control]="emailControl"
            [disabled]="isAnyLoginInProgress() || isRateLimited()">
          </app-form-input>

          <app-form-input
            label="Password"
            type="password"
            placeholder="Enter your password"
            [required]="true"
            [formControl]="passwordControl"
            [control]="passwordControl"
            [disabled]="isAnyLoginInProgress() || isRateLimited()">
          </app-form-input>

          <!-- Remember Me & Forgot Password -->
          <div class="form-options">
            <label class="checkbox-label">
              <input
                type="checkbox"
                [checked]="rememberMeControl.value"
                (change)="toggleRememberMe()"
                [disabled]="isAnyLoginInProgress() || isRateLimited()"
                class="checkbox-input">
              <span class="checkbox-custom"></span>
              <span class="checkbox-text">Remember me</span>
            </label>

            <a
              routerLink="/auth/forgot-password"
              class="forgot-link"
              [class.disabled]="isAnyLoginInProgress()">
              Forgot password?
            </a>
          </div>

          <app-button
            type="submit"
            variant="primary"
            size="lg"
            [fullWidth]="true"
            [isLoading]="loading()"
            [disabled]="!canAttemptLogin()"
            loadingText="Signing in...">
            <svg class="btn-icon-left" viewBox="0 0 24 24" fill="none" stroke="currentColor" style="display: inline-block; vertical-align: middle;">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"/>
            </svg>
            Sign In
          </app-button>

          <div class="security-notice">
            <svg class="security-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z"/>
            </svg>
            Your login is secured with industry-standard encryption
          </div>
        </form>
      </div>
    </div>
  </div>
</main>

<app-footer></app-footer>
