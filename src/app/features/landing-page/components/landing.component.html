<!-- Skip to Content Link for Accessibility -->
<a href="#main-content" class="skip-link" (click)="skipToContent()">
  Skip to main content
</a>

<!-- Loading Screen -->
@if (!loadingComplete()) {
  <div class="loading-screen">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>Loading amazing content...</p>
    </div>
  </div>
}

<!-- Progress Indicator -->
@if (landingConfig.showProgressIndicator && isScrolled()) {
  <div class="scroll-progress">
    <div class="progress-bar" [style.width.%]="getScrollProgress()"></div>
  </div>
}

<!-- Back to Top Button -->
@if (isScrolled()) {
  <button class="back-to-top"
          (click)="scrollToSection('hero')"
          aria-label="Back to top">
    <svg width="24" height="24" viewBox="0 0 24 24">
      <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"/>
    </svg>
  </button>
}

<!-- Main Landing Page Content -->
<div class="landing-page" [class.loading]="!loadingComplete()">

  <!-- Header with Navigation -->
  <app-header></app-header>

  <!-- Main Content -->
  <main id="main-content" class="main-content">

    <!-- Hero Section -->
    <section id="hero" class="section hero-section"
             [class.animate]="landingConfig.enableAnimations">
      <app-hero
        (ctaClicked)="onCtaClick('hero-primary')"
        (signupCompleted)="onSignupComplete()">
      </app-hero>
    </section>

    <!-- Stats Section (New) -->
    @if (shouldShowSection('stats')) {
      <section id="stats"
               class="section stats-section"
               [class.visible]="getSectionVisibility('stats')">
        <app-stats
          [animateOnVisible]="landingConfig.enableAnimations"
          (statClicked)="onCtaClick('stats')">
        </app-stats>
      </section>
    }

    <!-- Features Section -->
    <section id="features"
             class="section features-section"
             [class.visible]="getSectionVisibility('features')">
      <app-features
        [lazyLoad]="landingConfig.enableLazyLoading"
        (featureClicked)="onCtaClick('feature')"
        (imageLoad)="onImageLoad($event)"
        (imageError)="onImageError($event)">
      </app-features>
    </section>

    <!-- How It Works Section -->
    <section id="how-it-works"
             class="section how-it-works-section"
             [class.visible]="getSectionVisibility('how-it-works')">
      <app-how-it-works
        [variant]="getVariant('how-it-works')"
        (stepClicked)="onCtaClick('how-it-works')">
      </app-how-it-works>
    </section>

    <!-- Testimonials Section -->
    <section id="testimonials"
             class="section testimonials-section"
             [class.visible]="getSectionVisibility('testimonials')">
      <app-testimonials
        [autoplay]="landingConfig.enableAnimations"
        (testimonialClicked)="onCtaClick('testimonial')">
      </app-testimonials>
    </section>

    <!-- Pricing Section -->
    <section id="pricing"
             class="section pricing-section"
             [class.visible]="getSectionVisibility('pricing')">
      <app-pricing
        [highlightPopular]="true"
        (planSelected)="onCtaClick('pricing-' + $event)"
        (signupCompleted)="onSignupComplete()">
      </app-pricing>
    </section>

    <!-- FAQ Section (New) -->
    <section id="faq"
             class="section faq-section"
             [class.visible]="getSectionVisibility('faq')">
      <app-faq
        [searchable]="true"
        (questionClicked)="onCtaClick('faq')">
      </app-faq>
    </section>

    <!-- Blog Preview Section (New) -->
    @if (shouldShowSection('blog')) {
      <section id="blog"
               class="section blog-section"
               [class.visible]="getSectionVisibility('blog')">
        <app-blog-preview
          [maxPosts]="3"
          (postClicked)="onCtaClick('blog-post')"
          (viewAllClicked)="onCtaClick('blog-view-all')">
        </app-blog-preview>
      </section>
    }

    <!-- Newsletter Section (New) -->
    @if (shouldShowSection('newsletter')) {
      <section id="newsletter" class="section newsletter-section">
        <app-newsletter
          (subscribed)="onCtaClick('newsletter-signup')"
          (subscriptionCompleted)="onSignupComplete()">
        </app-newsletter>
      </section>
    }

    <!-- Final CTA Section (New) -->
    <section id="cta"
             class="section cta-section"
             [class.visible]="getSectionVisibility('cta')">
      <app-cta
        [variant]="getVariant('final-cta')"
        (ctaClicked)="onCtaClick('final-cta')"
        (signupCompleted)="onSignupComplete()">
      </app-cta>
    </section>

  </main>

  <!-- Footer -->
  <app-footer
    (newsletterSignup)="onNewsletterSignup($event)"
    (linkClicked)="onCtaClick('footer-' + $event)">
  </app-footer>

  <!-- Floating Actions -->
  @if (isScrolled()) {
    <div class="floating-actions">
      <button class="floating-btn help-btn"
              (click)="openHelp()"
              title="Get Help">
        <svg width="20" height="20" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" fill="currentColor"/>
        </svg>
      </button>
    </div>
  }

  <!-- Cookie Banner -->
  @if (false) { <!-- Set condition based on consent status -->
    <div class="cookie-banner">
      <div class="cookie-content">
        <p>We use cookies to enhance your experience. By continuing to visit this site you agree to our use of cookies.</p>
        <div class="cookie-actions">
          <button class="btn btn-secondary" (click)="acceptCookies()">Accept</button>
          <button class="btn btn-outline" (click)="declineCookies()">Decline</button>
        </div>
      </div>
    </div>
  }

  <!-- Development Analytics Debug Panel -->
  @if (false) { <!-- Set to true for development -->
    <div class="analytics-debug">
      <h3>Analytics Debug</h3>
      <pre>{{ landingAnalytics() | json }}</pre>
    </div>
  }

</div>

<!-- Structured Data for SEO (rendered in head by component) -->
<!-- This is handled programmatically in the component -->
