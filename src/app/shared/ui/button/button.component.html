<button
  [type]="type"
  [disabled]="disabled || loading()"
  [class]="getButtonClasses()"
  (click)="handleClick($event)"
  [attr.aria-label]="ariaLabel"
>
  @if (loading()) {
  <span class="loading-spinner" aria-hidden="true">
    <svg
      class="animate-spin"
      width="16"
      height="16"
      viewBox="0 0 24 24"
      fill="none"
    >
      <circle
        cx="12"
        cy="12"
        r="10"
        stroke="currentColor"
        stroke-width="4"
        opacity="0.25"
      />
      <path
        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
        fill="currentColor"
      />
    </svg>
  </span>
  } @if (iconLeft && !loading()) {
  <span class="icon-left">
    <ng-content select="[slot=icon-left]"></ng-content>
  </span>
  }

  <span class="button-text" [class.sr-only]="loading() && loadingText">
    <ng-content></ng-content>
  </span>

  @if (loading() && loadingText) {
  <span class="loading-text">
    {{ loadingText }}
  </span>
  } @if (iconRight && !loading()) {
  <span class="icon-right">
    <ng-content select="[slot=icon-right]"></ng-content>
  </span>
  }
</button>
